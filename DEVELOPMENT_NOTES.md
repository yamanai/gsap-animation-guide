# GSAP动画全栈开发指南 - 开发笔记

本文档记录在开发"GSAP动画全栈开发指南"VitePress项目过程中遇到的各种问题与解决方案，以帮助团队成员理解项目开发历程并提供技术参考。

## 目录

- [配置问题](#配置问题)
  - [VitePress代码高亮配置错误](#vitepress代码高亮配置错误)
- [导航问题](#导航问题)
  - [顶部导航高亮状态丢失](#顶部导航高亮状态丢失)
- [样式问题](#样式问题)
- [性能问题](#性能问题)
- [兼容性问题](#兼容性问题)

## 配置问题

### VitePress代码高亮配置错误

**问题描述：**  
在配置VitePress时，遇到TypeScript错误：`对象字面量只能指定已知属性，并且"shiki"不在类型"UserConfig<Config>"中`。

**原因分析：**  
这是由于VitePress 2.0版本对代码高亮配置方式的变更导致。早期版本中，shiki配置是作为顶级配置项单独存在，而在新版本中，这种配置方式已不再支持。

**解决方案：**  
移除顶级的`shiki`配置，仅保留必要的markdown配置：

```js
// 错误配置
shiki: {
  theme: {
    light: 'github-light',
    dark: 'github-dark'
  }
}

// 正确配置
markdown: {
  linkify: false,
  // 可选：如果需要自定义主题
  theme: {
    light: 'github-light',
    dark: 'github-dark'
  }
}
```

**学习要点：**
- VitePress配置API随版本更新有变化
- 需关注官方文档中的Breaking Changes
- 代码高亮功能在VitePress中由Shiki提供支持，即使不显式配置也会使用默认主题

## 导航问题

### 顶部导航高亮状态丢失

**问题描述：**  
当点击顶部导航后，对应项目正确高亮；但随后点击侧边栏任意项目时，顶部导航的高亮状态会被清除，导致用户可能无法判断当前所浏览内容属于哪个主要分类。

**原因分析：**  
VitePress默认只在完全匹配路径时高亮导航项。当用户点击侧边栏项目后，当前URL变为子页面路径，不再完全匹配顶部导航项的路径，从而导致高亮状态丢失。

**解决方案：**  
为顶部导航项添加`activeMatch`属性，使用正则表达式匹配所有子页面路径：

```js
nav: [
  { text: '首页', link: '/' },
  { text: '基础篇', link: '/basics/', activeMatch: '^/basics/' },
  { text: 'Vue3集成', link: '/vue-integration/', activeMatch: '^/vue-integration/' },
  // 其他导航项...
]
```

**学习要点：**
- VitePress的`activeMatch`属性允许使用正则表达式定义更灵活的高亮规则
- 导航状态对用户体验至关重要，应确保用户始终知道自己在站点中的位置
- 正则表达式`^/section/`表示匹配所有以"/section/"开头的路径

## 样式问题

*（待记录项目中遇到的样式相关问题）*

## 性能问题

*（待记录项目中遇到的性能相关问题）*

## 兼容性问题

*（待记录项目中遇到的兼容性相关问题）*

---

## 贡献指南

欢迎团队成员在开发过程中遇到新问题时，按照以下格式添加到本文档中：

```
### 问题简短描述

**问题描述：**  
详细描述问题的表现和影响。

**原因分析：**  
分析问题产生的技术原因。

**解决方案：**  
提供解决问题的具体步骤或代码示例。

**学习要点：**
- 从这个问题中学到的关键技术点
- 相关的最佳实践
- 可能需要注意的陷阱
```

请确保内容清晰、准确，并添加适当的代码示例和参考链接。 